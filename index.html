<html>
  <head></head>
<script type="module">
  import { URLPattern } from "./dist/index.js";

  window.URLPattern = URLPattern;

  function assert(result, expected) {
    console.log("Result:", result, ", Expected:", expected, "=>", result === expected ? "PASS" : "FAIL");
  }

  let pattern = new URLPattern({
      baseURL: self.origin,
      pathname: "/product/:name*",
    });

  assert(pattern.test(self.origin + "/product/a/b"), true);

  let relativePattern = new URLPattern({
    baseURL: "https://example.com/shop",
    pathname: "/product/:name*",
  });

  assert(relativePattern.test("https://example.com/product/a/b"), true);

  const imagePattern = new URLPattern({
    pathname: '/*.:imagetype(jpg|gif|png)'
  });

  let result = imagePattern.exec(self.origin + "/photo.jpg");

  console.info(result);
  assert(result.pathname.groups['imagetype'], "jpg");

  let result2 = imagePattern.exec(self.origin + "/photo.jxl");
  console.info(result2);

  let p1 = new URLPattern({
    baseURL: self.origin,
    pathname: "/product/:name*",
  });

  let p2 = new URLPattern({
    baseURL: self.origin,
    pathname: "/employee/:name*",
  });

  const baseURL = 'https://example.com';


  const ppattern = new URLPattern({baseURL, pathname: '/product/*?'});
  const res = ppattern.test(baseURL + '/product/a/b');
  if (res) {
    document.body.style.backgroundColor = 'green';
  } else {
    document.body.style.backgroundColor = 'red';
  }
  document.body.innerHTML = `<h1>${res ? "PASS" : "FAIL"}</h1>`;



</script>
</html>